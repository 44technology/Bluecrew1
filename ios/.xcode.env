# This `.xcode.env` file is versioned and is used to source the environment
# used when running script phases inside Xcode.
# To customize your local environment, you can create an `.xcode.env.local`
# file that is not versioned.

# NODE_BINARY variable contains the PATH to the node executable.
# Ensure common paths first so node is found on EAS/CI (Xcode script phases may have minimal PATH).
export PATH="/usr/local/bin:/opt/homebrew/bin:$PATH"
#
# Customize the NODE_BINARY variable here.
# For example, to use nvm with brew, add the following line
# . "$(brew --prefix nvm)/nvm.sh" --no-use
export NODE_BINARY=$(command -v node)
# Fallback for EAS / CI where PATH might not include node when script runs
[ -z "$NODE_BINARY" ] && export NODE_BINARY="/usr/local/bin/node"
[ ! -x "$NODE_BINARY" ] && [ -x "/opt/homebrew/bin/node" ] && export NODE_BINARY="/opt/homebrew/bin/node"
[ ! -x "$NODE_BINARY" ] && [ -x "/usr/local/bin/node" ] && export NODE_BINARY="/usr/local/bin/node"

# Prevent "JavaScript heap out of memory" during bundle (EAS / Xcode build phase)
[ -z "$NODE_OPTIONS" ] && export NODE_OPTIONS="--max-old-space-size=4096"
